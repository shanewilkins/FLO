repos:
  - repo: local
    hooks:
      - id: radon-complexity
        name: radon complexity
        entry: python scripts/check_complexity.py
        language: system
        pass_filenames: true
        files: "\\.py$"
        stages: ["commit"]
        description: "Fail commit if any function/class complexity > 15"
repos:
  - repo: local
    hooks:
      - id: ruff-check
        name: ruff (via uv)
        entry: uv run ruff check .
        language: system
        types: [python]
        pass_filenames: false
      - id: pyright-check
        name: pyright (via uv)
        entry: uv run pyright src
        language: system
        types: [python]
        pass_filenames: false
      - id: pydocstyle-check
        name: pydocstyle (via uv)
        entry: uv run pydocstyle .
        language: system
        types: [python]
        pass_filenames: false
      - id: pytest-check
        name: pytest (via uv)
        entry: uv run pytest -q
        language: system
        types: [python]
        pass_filenames: false
      - id: vulture-check
        name: vulture (via uv)
        # run vulture but do not fail the commit for now; results are
        # reported for manual triage. This keeps pre-commit green while
        # we iterate toward fewer false positives. If a whitelist exists,
        # pass it to vulture so reports focus on new findings.
        entry: bash -c "if [ -f vulture_whitelist.py ]; then uv run vulture src/flo tests --min-confidence 60 vulture_whitelist.py || true; else uv run vulture src/flo tests --min-confidence 60 || true; fi"
        language: system
        types: [python]
        pass_filenames: false
